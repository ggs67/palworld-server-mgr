# Introduction

This is a script to automatically manage the Palworld dedicated server in order to save resources if not used. The script waits for a connection by a client before it starts the server. The server remains then active until a specified time (usually in the night) at which it will be shutdown again.

# Prerequisites

The script has been tested on Ubuntu 22.04 but should also work on other distributions as long as they are more or less up-to-date and systemd based. The install script also exects

# Palworld server setup

## Initial setup

The script expects a Steam Palworld server V1.5+ to be setup according to the description below (link) with the exception of installing the service file into /etc/systemd . This file will be generated by install.sh

[Setting up a dedicated Palworld Server on Ubuntu]([Setting up a Palworld Server on Ubuntu - Pi My Life Up](https://pimylifeup.com/ubuntu-palworld-dedicated-server/))

## Additional setup

### Setup PalWorld server RCON

In addition to the documentation above you have to enable the RCON server. This is done by editing the PalWorldSettings.ini file created during the setup and change the following settings:

- AdminPassword="password" # replace the word password by the password of your choice
- RCONEnabled=True
- RCONPort=25575 # This is not effective in V1.5 anymore (the script passes it via command line)

### Edit server manager config

Edit palworld_server_mgr.conf config file and adjust the settings to your installation. As a minimum RCON_PASS must be adjusted to your AdminPassword set in the previous step.

### Add steam to sudo group

The sudo command must be available on the system and user `steam`added to the sudo group to allow the service installation to work and allow steam user to start and stop the service. 

To add steam to the sudo group execute the following command using `root` user:

```groupmems -a steam -g sudo
```

> [!WARNING]
> I expect this script to be mostly used for private systems. For systems where security is a concern you may want to add a special more restrictive rules to the sudoers to allow only the required commands
### Install the service

The script install.sh should be run once. It will download the rcon-cli binary for use by the server manager and install the PalWorld service in systemd

> [!NOTE]
>Support for deinstallation has yet to be added 
#### Service flags

The service can be installed with different flags. These flags are passed to the service when started. Currently the following fags are supported:

- -L : log server manager messages to the logs directory
- -x : include debug trace in the log
- -- : clear current flags

By default the server is installed with the--L flag. If any flag is passed to the install.sh script it is used as service flag and overwrites the default flags. If you want pass no flag at all, use the -- flag.
## Start service

````sudo systemctl start palworld
```